@using Microsoft.Ajax.Utilities
@using PITB.CMS_Common
@using System.Linq
@using PITB.CMS_Common.Handler.Permission
@using PITB.CMS_Common.Models.View.Dynamic
@using PITB.CMS_Common.Handler.Authentication
@model PITB.CMS_Common.Models.View.VmAddComplaint

@{
    //if (Request.IsAjaxRequest()) { Layout = null; }
    ViewBag.Title = "Add Complaint";
}
<style>
    .Complaint.active {
        border-top-color: #fbcc3e !important;
    }

    .Suggestion.active {
        border-top-color: #008000 !important;
    }

    .Inquiry.active {
        border-top-color: #ff0000 !important;
    }
    /*.select2 {
        width: 100% !important;
    }*/
    /*input {
        text-transform: uppercase;
    }*/
</style>

<div class="content-wrapper">
    <div class="container-fluid">

        <section class="content">
            <div style="    width: 50px;
                                       left: 0;
                                       position: fixed;
                                       z-index: 1000;
                                       margin: 0;
                                       height: 100px;">
                <img width="50px" src="@Url.Content(ViewBag.Campaignname)" alt="Alternate Text" />


            </div>
            @using (Html.BeginForm("OnAddComplaintSubmit", "SchoolEducationComplaint", FormMethod.Post, new { id = "AddComplaintFormSE" }))
            {
                @Html.AntiForgeryToken()
                @Html.HiddenFor(m => m.PersonalInfoVm.Person_id)
                @Html.HiddenFor(m => m.ComplaintVm.Compaign_Id)
                @Html.HiddenFor(m => m.currentComplaintTypeTab)
                @Html.HiddenFor(m => m.ComplaintVm.hasDepartment)
                @Html.HiddenFor(m => m.SuggestionVm.hasDepartment)
                @Html.HiddenFor(m => m.InquiryVm.hasDepartment)
                if (Model.PersonalInfoVm != null)
                {
                    @Html.HiddenFor(m => m.PersonalInfoVm.Cnic_No)
                }
                @*@Html.HiddenFor(m => m.PersonalInfoVm.IsCnicPresent)*@

                @*<label class="text-danger">@Html.ValidationSummary()</label>*@
                <section class="content">
                    <div class="row">
                        <div>

                            <div class="box box-primary">
                                <div class="box-header-blue with-border btn-header">
                                    <h4 class="box-title">Caller's Information</h4>
                                </div>
                                <div class="box-body-white" style="margin-top:5px;">
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>Name نام*</label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.TextBoxFor(m => m.PersonalInfoVm.Person_Name, new { @class = "fieldsEnable form-control characters-only-with-space text-uppercase", @placeholder = "Complainant Name" })
                                            @Html.ValidationMessageFor(m => m.PersonalInfoVm.Person_Name, "", new { @class = "label label-warning" })
                                        </div>
                                    </div>
                                    @*<div class="form-group col-md-6"> temporary hidden
                                            <div class="col-md-4">
                                                <label>Father/Husband Name</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.TextBoxFor(m => m.PersonalInfoVm.Person_Father_Name, new { @class = "form-control characters-only-with-space", @placeholder = "Father/Husband Name" })
                                            </div>
                                        </div>*@


                                    @if (Model.PersonalInfoVm == null)
                                    {
                                        <div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>CNIC شناختی کارڈ *</label>
                                            </div>
                                            <div class="col-md-4">
                                                @Html.TextBoxFor(m => m.PersonalInfoVm.Cnic_No, new { @class = "fieldsEnable form-control numbers-only", @placeholder = "ex 3520174842579", @maxlength = 13, id = "CnicTxtBox" })
                                                @Html.ValidationMessageFor(m => m.PersonalInfoVm.Cnic_No, "", new { @class = "label label-warning" })
                                                @*@Html.HiddenFor(m => m.PersonalInfoVm.IsCnicPresent2)*@
                                            </div>
                                            <div class="col-md-4">
                                                <div class="col-md-6" style="margin-top: 5px;">
                                                    Not Required
                                                </div>
                                                <div class="col-md-6">
                                                    @Html.CheckBoxFor(m => m.PersonalInfoVm.IsCnicPresent, new { @id = "IsCnicPresent", @Style = "width:20px;height:20px;" })
                                                </div>
                                            </div>
                                        </div>
                                    }
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>Gender جنس</label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.PersonalInfoVm.Gender, EnumHelper.GetSelectList(typeof(Config.Gender)), "--Select--", new { @class = "fieldsEnable form-control", @placeholder = "ex 3520174842579" })
                                            @Html.ValidationMessageFor(m => m.PersonalInfoVm.Gender, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>
                                                Cell Number موبائل نمبر *
                                            </label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.TextBoxFor(m => m.PersonalInfoVm.Mobile_No, new { @class = "fieldsEnable form-control numbers-only", @placeholder = "03001234567", @maxlength = 11 })
                                            @Html.ValidationMessageFor(m => m.PersonalInfoVm.Mobile_No, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>
                                                Secondary Contact No ثانوی رابطہ نمبر
                                            </label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.TextBoxFor(m => m.PersonalInfoVm.Secondary_Mobile_No, new { @class = "fieldsEnable form-control numbers-only", @placeholder = "04235880062", @maxlength = 15 })


                                        </div>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>Province صوبہ*</label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.PersonalInfoVm.Province_Id, Model.ComplaintVm.ProvinceSelectList, new { @Id = "userControlPersonProvince", @class = "fieldsEnable form-control" })
                                        </div>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>District ضلع*</label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.PersonalInfoVm.District_Id, new List<SelectListItem>(), "--Select--", new { @Id = "userControlPersonDistrict", @class = "fieldsEnable form-control" })
                                            @Html.ValidationMessageFor(m => m.PersonalInfoVm.District_Id, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>
                                    @*<div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>Address</label>
                                            </div>
                                            <div class="col-md-8 col-xs-12">
                                                @Html.TextAreaFor(m => m.PersonalInfoVm.Person_Address, new { @class = "form-control", rows = 3 })
                                            </div>

                                        </div>*@
                                    @*<div class="form-group col-md-6">temporary
                                            <div class="col-md-4">
                                                <label>Nearest location (if any)</label>
                                            </div>
                                            <div class="col-md-8 col-xs-12">
                                                <textarea class="form-control" rows="3"></textarea>
                                            </div>

                                        </div>*@
                                      @*<div class="form-group col-md-6 hide">
                                        
                                        <div class="col-md-4">
                                            <label>Send Anonmously </label>
                                        </div>
                                        <div class="col-md-8 col-xs-12">
                                            <p> @Html.CheckBoxFor(m => m.ComplaintVm.Is_Anonymous)</p>
                                            
                                            <small class="text-danger" style="font-weight:bold;">Note: The effectiveness of complaint resolution may be impacted if the caller's information is kept anonymous.</small>
                                        </div>

                                    </div>*@
                                    <br style="clear: both;" />

                                </div>
                            </div>
                        </div>
                        <!-- Tabs Area Start-->
                        <div class="nav-tabs-custom">
                            <ul class="nav nav-tabs">
                                <li class="active Complaint"><a href="#complaintArea" data-toggle="tab" aria-expanded="true">Complaint شکایت</a></li>
                                <li class="Suggestion"><a href="#suggestionArea" data-toggle="tab" aria-expanded="false">Suggestion تجاویز</a></li>
                                <li class="Inquiry"><a href="#InquiryArea" data-toggle="tab" aria-expanded="false">Inquiry تفتیش</a></li>
                                @*<li class="pull-right"><a href="#" class="text-muted"><i class="fa fa-gear"></i></a></li>*@
                            </ul>
                            <div class="tab-content">
                                <!--Complaint tab content-->
                                <div class="tab-pane active" id="complaintArea">

                                    @if (Model.ComplaintVm.DynamicFieldsCount > 0)
                                    {
                                        @*@Html.TextBoxFor(m => m.ComplaintVm.ListDynamicTextBox[0].CnicNo3, new { @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.ComplaintVm.ListDynamicTextBox[0].CnicNo3, null, new { @class = "label label-warning" })
                                            @Html.HiddenFor(m => m.ComplaintVm.ListDynamicTextBox[0].MunnaKaka)*@

                                        int index = 0;

                                        for (int i = Model.ComplaintVm.MinDynamicFormPriority; i <= Model.ComplaintVm.MaxDynamicFormPriority; i++)
                                        {

                                            @*List<VmDynamicDropDownList> listVmDropDownList = Model.ComplaintVm.ListDynamicDropDown.Where(n => n.Priority == i).ToList();*@
                                            List<VmDynamicTextbox> listVmTextBox = Model.ComplaintVm.ListDynamicTextBox.Where(n => n.Priority == i).ToList();
                                            List<VmDynamicLabel> listVmLabel = Model.ComplaintVm.ListDynamicLabel.Where(n => n.Priority == i).ToList();
                                            //List<VmDynamicDropDownListServerSide> listVmDropDownListServerSide = Model.ComplaintVm.ListDynamicDropDownServerSide.Where(n => n.Priority == i).ToList();

                                            @*// DropdownListCode
                                                if (listVmDropDownList != null)
                                                {
                                                    foreach (VmDynamicDropDownList vmDropDownList in listVmDropDownList)
                                                    {
                                                        index = Model.ComplaintVm.ListDynamicDropDown.FindIndex(n => n == vmDropDownList);
                                                        // adding custom code

                                                        //VmDynamicDropDownList vmDropDownList = Model.ComplaintVm.ListDynamicDropDown[index];
                                                        @Html.HiddenFor(m => m.ComplaintVm.ListDynamicDropDown[index].ControlId)
                                                        @Html.HiddenFor(m => m.ComplaintVm.ListDynamicDropDown[index].FieldName)
                                                        <div class="form-group col-md-6">
                                                            <div class="col-md-4">
                                                                <label>@vmDropDownList.FieldName</label>
                                                            </div>
                                                            <div class="col-md-8">
                                                                @Html.DropDownListFor(m => m.ComplaintVm.ListDynamicDropDown[index].SelectedItemId, vmDropDownList.FieldValue, "--Select--", new { @class = "form-control" })
                                                                @Html.ValidationMessageFor(m => m.ComplaintVm.ListDynamicDropDown[index].SelectedItemId, null, new { @class = "label label-warning" })
                                                                @Html.HiddenFor(m => m.ComplaintVm.ListDynamicDropDown[index].IsRequired)
                                                            </div>
                                                        </div>
                                                    }
                                                }*@
                                            // end DropdownListCode

                                            // DropdownListCode server side
                                            @*if (listVmDropDownListServerSide != null)
                                                {
                                                    foreach (VmDynamicDropDownListServerSide vmDropDownListServerSide in listVmDropDownListServerSide)
                                                    {
                                                        index = Model.ComplaintVm.ListDynamicDropDownServerSide.FindIndex(n => n == vmDropDownListServerSide);
                                                        //string appendedDropDownListId = index+"_"+@Model.ComplaintVm.Compaign_Id + "_" + vmDropDownListServerSide.CategoryTypeId;
                                                        string appendedDropDownListId = Config.Separator + index + Config.Separator + Model.ComplaintVm.Compaign_Id + Config.Separator + vmDropDownListServerSide.CategoryTypeId + Config.Separator;
                                                        // adding custom code

                                                        @Html.HiddenFor(m => m.ComplaintVm.ListDynamicDropDownServerSide[index].ControlId)
                                                        @Html.HiddenFor(m => m.ComplaintVm.ListDynamicDropDownServerSide[index].FieldName)
                                                        <div class="form-group col-md-6">
                                                            <div class="col-md-4">
                                                                <label>@vmDropDownListServerSide.FieldName</label>
                                                            </div>
                                                            <div class="col-md-8">
                                                                @Html.DropDownListFor(m => m.ComplaintVm.ListDynamicDropDownServerSide[index].SelectedItemId, vmDropDownListServerSide.FieldValue, "--Select--", new { @class = "js-data-example-ajax js-example-events form-control", @Id = "DynamicDropDownListServerSide" + appendedDropDownListId })
                                                                @Html.ValidationMessageFor(m => m.ComplaintVm.ListDynamicDropDownServerSide[index].SelectedItemId, null, new { @class = "label label-warning" })
                                                                @Html.HiddenFor(m => m.ComplaintVm.ListDynamicDropDownServerSide[index].IsRequired)
                                                            </div>
                                                        </div>
                                                    }
                                                }*@

                                            // TextBox
                                            if (listVmTextBox != null)
                                            {
                                                foreach (VmDynamicTextbox vmTextBox in listVmTextBox)
                                                {
                                                    index = Model.ComplaintVm.ListDynamicTextBox.FindIndex(n => n == vmTextBox);
                                                    // adding custom code

                                                    //VmDynamicDropDownList vmDropDownList = Model.ComplaintVm.ListDynamicDropDown[index];
                                                    @Html.HiddenFor(m => m.ComplaintVm.ListDynamicTextBox[index].ControlId)
                                                    @Html.HiddenFor(m => m.ComplaintVm.ListDynamicTextBox[index].FieldName)
                                                    <div class="form-group col-md-6">
                                                        <div class="col-md-4">
                                                            <label>@vmTextBox.FieldName</label>
                                                            @*<label>@vmTextBox.FieldName</label>*@
                                                        </div>
                                                        <div class="col-md-8">
                                                            @Html.TextBoxFor(m => m.ComplaintVm.ListDynamicTextBox[index].FieldValue, new { @class = "form-control" })
                                                            @Html.ValidationMessageFor(m => m.ComplaintVm.ListDynamicTextBox[index].FieldValue, null, new { @class = "label label-warning" })
                                                            @Html.HiddenFor(m => m.ComplaintVm.ListDynamicTextBox[index].IsRequired)
                                                        </div>
                                                    </div>
                                                }
                                            }
                                            //Label
                                            if (listVmLabel != null)
                                            {
                                                foreach (VmDynamicLabel vmLabel in listVmLabel)
                                                {
                                                    index = Model.ComplaintVm.ListDynamicLabel.FindIndex(n => n == vmLabel);
                                                    // adding custom code

                                                    //VmDynamicDropDownList vmDropDownList = Model.ComplaintVm.ListDynamicDropDown[index];
                                                    @Html.HiddenFor(m => m.ComplaintVm.ListDynamicLabel[index].ControlId)
                                                    @Html.HiddenFor(m => m.ComplaintVm.ListDynamicLabel[index].FieldName)
                                                    <div class="form-group col-md-6">
                                                        <div class="col-md-4">
                                                            <label>@vmLabel.FieldName</label>
                                                            @*<label>@vmTextBox.FieldName</label>*@
                                                        </div>
                                                        <div class="col-md-8" @*id ="@("ComplaintDynamicLabel" + Config.Separator + vmLabel.ControlId)"*@>
                                                            @Html.TextBoxFor(m => m.ComplaintVm.ListDynamicLabel[index].FieldValue, new { @Id = "ComplaintDynamicLabel" + Config.Separator + vmLabel.ControlId, @class = "display-readonlyTextBox", @readonly = true })
                                                            @*@Html.ValidationMessageFor(m => m.ComplaintVm.ListDynamicLabel[index].FieldValue, null, new { @class = "label label-warning" })*@
                                                            @Html.HiddenFor(m => m.ComplaintVm.ListDynamicLabel[index].IsRequired)
                                                        </div>
                                                    </div>
                                                }
                                            }

                                            // end TextBox
                                        }

                                        <br clear="all" />
                                        <hr>
                                        <br clear="all" />
                                    }

                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>
                                                School Category سکول کا زمرہ
                                            </label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.ComplaintVm.SchoolCategory, Model.ComplaintVm.SchoolCategorySelectList, new { @Id = "complaintSchoolCategory", @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.ComplaintVm.SchoolCategory, "", new { @class = "label label-warning" })

                                            @*@Html.CheckBoxFor(m => m.ComplaintVm.IsPrivate, new { @Id = "complaintIsPrivate" })
                                                @Html.ValidationMessageFor(m => m.ComplaintVm.IsPrivate, "", new { @class = "label label-warning" })*@
                                            @*@Html.CheckBoxFor(m => m.ComplaintVm.IsPrivate, new { @Id = "IsPrivate", @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.ComplaintVm.IsPrivate, "", new { @class = "label label-warning" })*@


                                        </div>
                                    </div>

                                    <div class="form-group col-md-6 hide">
                                        <div class="col-md-4">
                                            <label>Province صوبہ</label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.ComplaintVm.Province_Id, Model.ComplaintVm.ProvinceSelectList, new { @Id = "complaintUserControlProvince", @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.ComplaintVm.Province_Id, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>District ضلع</label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.ComplaintVm.District_Id, new List<SelectListItem>(), "--Select--", new { @Id = "complaintUserControlDistrict", @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.ComplaintVm.District_Id, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>

                                    @if (Model.ComplaintVm.DynamicFieldsCount > 0)
                                    {
                                        int index = 0;

                                        for (int i = Model.ComplaintVm.MinDynamicFormPriority; i <= Model.ComplaintVm.MaxDynamicFormPriority; i++)
                                        {
                                            List<VmDynamicDropDownListServerSide> listVmDropDownListServerSide = Model.ComplaintVm.ListDynamicDropDownServerSide.Where(n => n.Priority == i).ToList();

                                            // DropdownListCode server side
                                            if (listVmDropDownListServerSide != null)
                                            {
                                                foreach (VmDynamicDropDownListServerSide vmDropDownListServerSide in listVmDropDownListServerSide)
                                                {
                                                    index = Model.ComplaintVm.ListDynamicDropDownServerSide.FindIndex(n => n == vmDropDownListServerSide);
                                                    //string appendedDropDownListId = index+"_"+@Model.ComplaintVm.Compaign_Id + "_" + vmDropDownListServerSide.CategoryTypeId;
                                                    string appendedDropDownListId = Config.Separator + index + Config.Separator + Model.ComplaintVm.Compaign_Id + Config.Separator + vmDropDownListServerSide.CategoryTypeId + Config.Separator;
                                                    // adding custom code

                                                    @Html.HiddenFor(m => m.ComplaintVm.ListDynamicDropDownServerSide[index].ControlId)
                                                    @Html.HiddenFor(m => m.ComplaintVm.ListDynamicDropDownServerSide[index].FieldName)
                                                    <div class="form-group col-md-6">
                                                        <div class="col-md-4">
                                                            <label>
                                                                @vmDropDownListServerSide.FieldName سکول کا نام
                                                             </label>
                                                        </div>
                                                        <div class="col-md-8">
                                                            @Html.DropDownListFor(m => m.ComplaintVm.ListDynamicDropDownServerSide[index].SelectedItemId, vmDropDownListServerSide.FieldValue, "--Select--", new { @class = "js-data-example-ajax js-example-events form-control", @Id = "complaintDynamicDropDownListServerSide" + appendedDropDownListId })
                                                            @Html.ValidationMessageFor(m => m.ComplaintVm.ListDynamicDropDownServerSide[index].SelectedItemId, null, new { @class = "label label-warning" })
                                                            @Html.HiddenFor(m => m.ComplaintVm.ListDynamicDropDownServerSide[index].IsRequired)
                                                        </div>
                                                    </div>
                                                }
                                            }

                                        }
                                    }


                                    @if (@Model.ComplaintVm.ListOfDepartment != null && @Model.ComplaintVm.ListOfDepartment.Count > 0)
                                    {
                                        <div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>Category زمرہ</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.DropDownListFor(m => m.ComplaintVm.departmentId, Model.ComplaintVm.DepartmentSelectList, "--Select--", new { @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.ComplaintVm.departmentId, "", new { @class = "label label-warning" })


                                            </div>
                                        </div>
                                    }
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>Type قسم</label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.ComplaintVm.Complaint_Category, Model.ComplaintVm.ComplaintCategoriesSelectList, "--Select--", new { @class = "form-control", @placeholder = "ex 3520174842579" })
                                            @Html.ValidationMessageFor(m => m.ComplaintVm.Complaint_Category, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>
                                                SubType ذیلی قسم
                                            </label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.ComplaintVm.Complaint_SubCategory, new List<SelectListItem>(), "--Select--", new { @class = "form-control", @placeholder = "ex 3520174842579" })
                                            @Html.ValidationMessageFor(m => m.ComplaintVm.Complaint_SubCategory, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>
                                    @*<div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>Type</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.DropDownListFor(m => m.ComplaintVm.Complaint_Type, EnumHelper.GetSelectList(typeof(Config.ComplaintType)), "--Select--", new { @class = "form-control", @placeholder = "ex 3520174842579" })
                                            </div>
                                        </div>*@



                                    @*<div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>Town/Tehsil*</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.DropDownListFor(m => m.ComplaintVm.Tehsil_Id, new List<SelectListItem>(), "--Select--", new { @Id = "complaintUserControlTownTehsil", @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.ComplaintVm.Tehsil_Id, "", new { @class = "label label-warning" })


                                            </div>
                                        </div>
                                        <div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>UC*</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.DropDownListFor(m => m.ComplaintVm.UnionCouncil_Id, new List<SelectListItem>(), "--Select--", new { @Id = "complaintUserControlUc", @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.ComplaintVm.UnionCouncil_Id, "", new { @class = "label label-warning" })


                                            </div>
                                        </div>*@
                                    @if (PermissionHandler.IsPermissionAllowedInCampagin(Config.CampaignPermissions.ShowWards))
                                    {
                                        <div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>
                                                    Wards ورڈز *
                                                </label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.DropDownListFor(m => m.ComplaintVm.Ward_Id, new List<SelectListItem>(), "--Select--", new { @Id = "complaintUserControlWards", @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.ComplaintVm.Ward_Id, "", new { @class = "label label-warning" })


                                            </div>
                                        </div>
                                    }


                                    @*<div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>House / Shop No</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.TextBoxFor(m => m.ComplaintVm.HomeShopNo, new { @class = "form-control", @placeholder = "Home or shop no" })
                                            </div>
                                        </div>
                                        <div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>Street No. / Name</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.TextBoxFor(m => m.ComplaintVm.StreetNameNo, new { @class = "form-control", @placeholder = "Stree no or name" })
                                            </div>
                                        </div>
                                        <div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>Locality / Area</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.TextBoxFor(m => m.ComplaintVm.LocalityArea, new { @class = "form-control", @placeholder = "Nearest Location" })
                                            </div>
                                        </div>*@
                                    <div class="form-group col-lg-12 col-md-12">
                                        <div class="col-md-2 col-lg-2">
                                            <label>
                                                Details of Complaint شکایت کی تفصیلات
                                            </label>
                                        </div>
                                        <div class="col-md-10">

                                            @Html.TextAreaFor(m => m.ComplaintVm.Complaint_Remarks, new { @class = "form-control col-md-12 col-xs-12", rows = 3 })
                                            @Html.ValidationMessageFor(m => m.ComplaintVm.Complaint_Remarks, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>
                                    @if (Model.ComplaintVm.DynamicFieldsCount > 0)
                                    {
                                        int index = 0;

                                        for (int i = Model.ComplaintVm.MinDynamicFormPriority; i <= Model.ComplaintVm.MaxDynamicFormPriority; i++)
                                        {
                                            List<VmDynamicDropDownList> listVmDropDownList = Model.ComplaintVm.ListDynamicDropDown.Where(n => n.Priority == i).ToList();

                                            // DropdownListCode
                                            if (listVmDropDownList != null)
                                            {
                                                foreach (VmDynamicDropDownList vmDropDownList in listVmDropDownList)
                                                {
                                                    index = Model.ComplaintVm.ListDynamicDropDown.FindIndex(n => n == vmDropDownList);
                                                    // adding custom code

                                                    //VmDynamicDropDownList vmDropDownList = Model.ComplaintVm.ListDynamicDropDown[index];
                                                    @Html.HiddenFor(m => m.ComplaintVm.ListDynamicDropDown[index].ControlId)
                                                    @Html.HiddenFor(m => m.ComplaintVm.ListDynamicDropDown[index].FieldName)
                                                    <div class="form-group col-md-6">
                                                        <div class="col-md-4">
                                                            <label>
                                                                @vmDropDownList.FieldName
                                                             </label>
                                                        </div>
                                                        <div class="col-md-8">
                                                            @Html.DropDownListFor(m => m.ComplaintVm.ListDynamicDropDown[index].SelectedItemId, vmDropDownList.FieldValue, "--Select--", new { @class = "form-control" })
                                                            @Html.ValidationMessageFor(m => m.ComplaintVm.ListDynamicDropDown[index].SelectedItemId, null, new { @class = "label label-warning" })
                                                            @Html.HiddenFor(m => m.ComplaintVm.ListDynamicDropDown[index].IsRequired)
                                                        </div>
                                                    </div>
                                                }
                                            }
                                            // end DropdownListCode

                                        }
                                    }
                                    @*<div class="form-group col-lg-12 col-md-12">
                                            <div class="col-md-2 col-lg-2">
                                                <label>Agent's comments </label>
                                            </div>
                                            <div class="col-md-10">
                                                @Html.TextAreaFor(m => m.ComplaintVm.Agent_Comments, new { @class = "form-control col-md-12 col-xs-12", rows = 3 })
                                                @Html.ValidationMessageFor(m => m.ComplaintVm.Agent_Comments, "", new { @class = "label label-warning" })


                                            </div>
                                        </div>*@
                                    <div class="form-group col-md-12">
                                        <button type="submit" style="margin: 5px 15px 0 0" class="btn btn-primary pull-right" onclick="OnSumitClick()"><span class="fa fa-save"></span>&nbsp;Submit</button>
                                    </div>
                                    <br clear="all" />
                                    @*<div class="col-md-12 col-xs-12">
                                            <div class="box box-primary">
                                                <div class="box-header-blue with-border btn-header">
                                                    <h4 class="box-title" style="float:left;"> New Complaint</h4>
                                                </div>


                                                <div class="box-body-white" style="margin-top:5px;">


                                                    <br style="clear: both;" />

                                                </div>
                                            
                                                <div class="box-footer">
                                                    <div class="col-md-8 col-md-offset-2 text-center"><button class="btn btn-primary" type="submit">Launch Complaint</button></div>
                                                </div>
                                            </div>
                                        </div>*@
                                </div>
                                <!--End Complaint-->
                                <!--Suggestion tab content-->
                                <div class="tab-pane" id="suggestionArea">

                                    @if (Model.SuggestionVm.DynamicFieldsCount > 0)
                                    {

                                        int index = 0;

                                        for (int i = Model.SuggestionVm.MinDynamicFormPriority; i <= Model.SuggestionVm.MaxDynamicFormPriority; i++)
                                        {

                                            //List<VmDynamicDropDownList> listVmDropDownList = Model.SuggestionVm.ListDynamicDropDown.Where(n => n.Priority == i).ToList();
                                            List<VmDynamicTextbox> listVmTextBox = Model.SuggestionVm.ListDynamicTextBox.Where(n => n.Priority == i).ToList();
                                            List<VmDynamicLabel> listVmLabel = Model.SuggestionVm.ListDynamicLabel.Where(n => n.Priority == i).ToList();
                                            //List<VmDynamicDropDownListServerSide> listVmDropDownListServerSide = Model.SuggestionVm.ListDynamicDropDownServerSide.Where(n => n.Priority == i).ToList();

                                            // DropdownListCode
                                            @*if (listVmDropDownList != null)
                                                {
                                                    foreach (VmDynamicDropDownList vmDropDownList in listVmDropDownList)
                                                    {
                                                        index = Model.SuggestionVm.ListDynamicDropDown.FindIndex(n => n == vmDropDownList);
                                                        // adding custom code

                                                        //VmDynamicDropDownList vmDropDownList = Model.SuggestionVm.ListDynamicDropDown[index];
                                                        @Html.HiddenFor(m => m.SuggestionVm.ListDynamicDropDown[index].ControlId)
                                                        @Html.HiddenFor(m => m.SuggestionVm.ListDynamicDropDown[index].FieldName)
                                                        <div class="form-group col-md-6">
                                                            <div class="col-md-4">
                                                                <label>@vmDropDownList.FieldName</label>
                                                            </div>
                                                            <div class="col-md-8">
                                                                @Html.DropDownListFor(m => m.SuggestionVm.ListDynamicDropDown[index].SelectedItemId, vmDropDownList.FieldValue, "--Select--", new { @class = "form-control" })
                                                                @Html.ValidationMessageFor(m => m.SuggestionVm.ListDynamicDropDown[index].SelectedItemId, null, new { @class = "label label-warning" })
                                                                @Html.HiddenFor(m => m.SuggestionVm.ListDynamicDropDown[index].IsRequired)
                                                            </div>
                                                        </div>
                                                    }
                                                }*@
                                            // end DropdownListCode

                                            // DropdownListCode server side
                                            /*if (listVmDropDownListServerSide != null)
                                            {
                                                foreach (VmDynamicDropDownListServerSide vmDropDownListServerSide in listVmDropDownListServerSide)
                                                {
                                                    index = Model.SuggestionVm.ListDynamicDropDownServerSide.FindIndex(n => n == vmDropDownListServerSide);
                                                    //string appendedDropDownListId = index+"_"+@Model.SuggestionVm.Compaign_Id + "_" + vmDropDownListServerSide.CategoryTypeId;
                                                    string appendedDropDownListId = Config.Separator + index + Config.Separator + Model.SuggestionVm.Compaign_Id + Config.Separator + vmDropDownListServerSide.CategoryTypeId + Config.Separator;
                                                    // adding custom code

                                                    @Html.HiddenFor(m => m.SuggestionVm.ListDynamicDropDownServerSide[index].ControlId)
                                                    @Html.HiddenFor(m => m.SuggestionVm.ListDynamicDropDownServerSide[index].FieldName)
                                                    <div class="form-group col-md-6">
                                                        <div class="col-md-4">
                                                            <label>@vmDropDownListServerSide.FieldName</label>
                                                        </div>
                                                        <div class="col-md-8">
                                                            @Html.DropDownListFor(m => m.SuggestionVm.ListDynamicDropDownServerSide[index].SelectedItemId, vmDropDownListServerSide.FieldValue, "--Select--", new { @class = "js-data-example-ajax js-example-events form-control", @Id = "DynamicDropDownListServerSide" + appendedDropDownListId })
                                                            @Html.ValidationMessageFor(m => m.SuggestionVm.ListDynamicDropDownServerSide[index].SelectedItemId, null, new { @class = "label label-warning" })
                                                            @Html.HiddenFor(m => m.SuggestionVm.ListDynamicDropDownServerSide[index].IsRequired)
                                                        </div>
                                                    </div>
                                                }
                                            }
                                            */
                                            // TextBox
                                            if (listVmTextBox != null)
                                            {
                                                foreach (VmDynamicTextbox vmTextBox in listVmTextBox)
                                                {
                                                    index = Model.SuggestionVm.ListDynamicTextBox.FindIndex(n => n == vmTextBox);
                                                    // adding custom code

                                                    //VmDynamicDropDownList vmDropDownList = Model.SuggestionVm.ListDynamicDropDown[index];
                                                    @Html.HiddenFor(m => m.SuggestionVm.ListDynamicTextBox[index].ControlId)
                                                    @Html.HiddenFor(m => m.SuggestionVm.ListDynamicTextBox[index].FieldName)
                                                    <div class="form-group col-md-6">
                                                        <div class="col-md-4">
                                                            <label>@vmTextBox.FieldName</label>
                                                            @*<label>@vmTextBox.FieldName</label>*@
                                                        </div>
                                                        <div class="col-md-8">
                                                            @Html.TextBoxFor(m => m.SuggestionVm.ListDynamicTextBox[index].FieldValue, new { @class = "form-control" })
                                                            @Html.ValidationMessageFor(m => m.SuggestionVm.ListDynamicTextBox[index].FieldValue, null, new { @class = "label label-warning" })
                                                            @Html.HiddenFor(m => m.SuggestionVm.ListDynamicTextBox[index].IsRequired)
                                                        </div>
                                                    </div>
                                                }
                                            }
                                            // end TextBox
                                            if (listVmLabel != null)
                                            {
                                                foreach (VmDynamicLabel vmLabel in listVmLabel)
                                                {
                                                    index = Model.SuggestionVm.ListDynamicLabel.FindIndex(n => n == vmLabel);
                                                    // adding custom code

                                                    //VmDynamicDropDownList vmDropDownList = Model.ComplaintVm.ListDynamicDropDown[index];
                                                    @Html.HiddenFor(m => m.SuggestionVm.ListDynamicLabel[index].ControlId)
                                                    @Html.HiddenFor(m => m.SuggestionVm.ListDynamicLabel[index].FieldName)
                                                    <div class="form-group col-md-6">
                                                        <div class="col-md-4">
                                                            <label>@vmLabel.FieldName</label>
                                                            @*<label>@vmTextBox.FieldName</label>*@
                                                        </div>
                                                        <div class="col-md-8" @*id="@("SuggestionDynamicLabel" + Config.Separator + vmLabel.ControlId)"*@>
                                                            @Html.TextBoxFor(m => m.SuggestionVm.ListDynamicLabel[index].FieldValue, new { @Id = "SuggestionDynamicLabel" + Config.Separator + vmLabel.ControlId, @class = "display-readonlyTextBox", @readonly = true })
                                                            @*@Html.ValidationMessageFor(m => m.ComplaintVm.ListDynamicLabel[index].FieldValue, null, new { @class = "label label-warning" })*@
                                                            @Html.HiddenFor(m => m.SuggestionVm.ListDynamicLabel[index].IsRequired)
                                                        </div>
                                                    </div>
                                                }
                                            }
                                        }

                                        <br clear="all" />
                                        <hr>
                                        <br clear="all" />
                                    }
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>
                                                School Category سکول کا زمرہ *
                                            </label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.SuggestionVm.SchoolCategory, Model.SuggestionVm.SchoolCategorySelectList, new { @Id = "suggestionSchoolCategory", @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.SuggestionVm.SchoolCategory, "", new { @class = "label label-warning" })

                                            @*@Html.CheckBoxFor(m => m.SuggestionVm.IsPrivate, new { @Id = "suggestionIsPrivate" })*@
                                            @*@Html.ValidationMessageFor(m => m.ComplaintVm.IsPrivate, "", new { @class = "label label-warning" })*@
                                            @*@Html.CheckBoxFor(m => m.ComplaintVm.IsPrivate, new { @Id = "IsPrivate", @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.ComplaintVm.IsPrivate, "", new { @class = "label label-warning" })*@


                                        </div>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>Province صوبہ</label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.SuggestionVm.Province_Id, Model.SuggestionVm.ProvinceSelectList, new { @Id = "suggestionUserControlProvince", @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.SuggestionVm.Province_Id, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>District ضلع</label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.SuggestionVm.District_Id, new List<SelectListItem>(), "--Select--", new { @Id = "suggestionUserControlDistrict", @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.SuggestionVm.District_Id, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>
                                    @if (Model.SuggestionVm.DynamicFieldsCount > 0)
                                    {
                                        int index = 0;

                                        for (int i = Model.SuggestionVm.MinDynamicFormPriority; i <= Model.SuggestionVm.MaxDynamicFormPriority; i++)
                                        {
                                            List<VmDynamicDropDownListServerSide> listVmDropDownListServerSide = Model.SuggestionVm.ListDynamicDropDownServerSide.Where(n => n.Priority == i).ToList();

                                            // DropdownListCode server side
                                            if (listVmDropDownListServerSide != null)
                                            {
                                                foreach (VmDynamicDropDownListServerSide vmDropDownListServerSide in listVmDropDownListServerSide)
                                                {
                                                    index = Model.SuggestionVm.ListDynamicDropDownServerSide.FindIndex(n => n == vmDropDownListServerSide);
                                                    //string appendedDropDownListId = index+"_"+@Model.ComplaintVm.Compaign_Id + "_" + vmDropDownListServerSide.CategoryTypeId;
                                                    string appendedDropDownListId = Config.Separator + index + Config.Separator + Model.ComplaintVm.Compaign_Id + Config.Separator + vmDropDownListServerSide.CategoryTypeId + Config.Separator;
                                                    // adding custom code

                                                    @Html.HiddenFor(m => m.SuggestionVm.ListDynamicDropDownServerSide[index].ControlId)
                                                    @Html.HiddenFor(m => m.SuggestionVm.ListDynamicDropDownServerSide[index].FieldName)
                                                    <div class="form-group col-md-6">
                                                        <div class="col-md-4">
                                                            <label>@vmDropDownListServerSide.FieldName</label>
                                                        </div>
                                                        <div class="col-md-8">
                                                            @Html.DropDownListFor(m => m.SuggestionVm.ListDynamicDropDownServerSide[index].SelectedItemId, vmDropDownListServerSide.FieldValue, "--Select--", new { @class = "js-data-example-ajax js-example-events form-control", @Id = "suggestionDynamicDropDownListServerSide" + appendedDropDownListId })
                                                            @Html.ValidationMessageFor(m => m.SuggestionVm.ListDynamicDropDownServerSide[index].SelectedItemId, null, new { @class = "label label-warning" })
                                                            @Html.HiddenFor(m => m.SuggestionVm.ListDynamicDropDownServerSide[index].IsRequired)
                                                        </div>
                                                    </div>
                                                }
                                            }

                                        }
                                    }

                                    @if (@Model.SuggestionVm.ListOfDepartment != null && @Model.SuggestionVm.ListOfDepartment.Count > 0)
                                    {
                                        <div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>Category زمرہ</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.DropDownListFor(m => m.SuggestionVm.departmentId, Model.SuggestionVm.DepartmentSelectList, "--Select--", new { @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.SuggestionVm.departmentId, "", new { @class = "label label-warning" })


                                            </div>
                                        </div>
                                    }

                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>Type قسم</label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.SuggestionVm.Complaint_Category, Model.SuggestionVm.ComplaintCategoriesSelectList, "--Select--", new { @class = "form-control", @placeholder = "ex 3520174842579" })
                                            @Html.ValidationMessageFor(m => m.SuggestionVm.Complaint_Category, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>
                                                SubType ذیلی قسم
                                            </label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.SuggestionVm.Complaint_SubCategory, new List<SelectListItem>(), "--Select--", new { @class = "form-control", @placeholder = "ex 3520174842579" })
                                            @Html.ValidationMessageFor(m => m.SuggestionVm.Complaint_SubCategory, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>



                                    @*<div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>Town/Tehsil*</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.DropDownListFor(m => m.SuggestionVm.Tehsil_Id, new List<SelectListItem>(), "--Select--", new { @Id = "suggestionUserControlTownTehsil", @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.SuggestionVm.Tehsil_Id, "", new { @class = "label label-warning" })


                                            </div>
                                        </div>
                                        <div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>UC*</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.DropDownListFor(m => m.SuggestionVm.UnionCouncil_Id, new List<SelectListItem>(), "--Select--", new { @Id = "suggestionUserControlUc", @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.SuggestionVm.UnionCouncil_Id, "", new { @class = "label label-warning" })


                                            </div>
                                        </div>

                                        <div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>Wards*</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.DropDownListFor(m => m.SuggestionVm.Ward_Id, new List<SelectListItem>(), "--Select--", new { @Id = "suggestionUserControlWards", @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.SuggestionVm.Ward_Id, "", new { @class = "label label-warning" })


                                            </div>
                                        </div>*@




                                    <div class="form-group col-lg-12 col-md-12">
                                        <div class="col-md-2 col-lg-2">
                                            <label>
                                                Details of Complaint شکایت کی تفصیلات
                                            </label>
                                        </div>
                                        <div class="col-md-10">

                                            @Html.TextAreaFor(m => m.SuggestionVm.Complaint_Remarks, new { @class = "form-control col-md-12 col-xs-12", rows = 3 })
                                            @Html.ValidationMessageFor(m => m.SuggestionVm.Complaint_Remarks, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>
                                    @if (Model.SuggestionVm.DynamicFieldsCount > 0)
                                    {
                                        int index = 0;

                                        for (int i = Model.SuggestionVm.MinDynamicFormPriority; i <= Model.SuggestionVm.MaxDynamicFormPriority; i++)
                                        {
                                            List<VmDynamicDropDownList> listVmDropDownList = Model.SuggestionVm.ListDynamicDropDown.Where(n => n.Priority == i).ToList();

                                            // DropdownListCode
                                            if (listVmDropDownList != null)
                                            {
                                                foreach (VmDynamicDropDownList vmDropDownList in listVmDropDownList)
                                                {
                                                    index = Model.SuggestionVm.ListDynamicDropDown.FindIndex(n => n == vmDropDownList);
                                                    // adding custom code

                                                    //VmDynamicDropDownList vmDropDownList = Model.SuggestionVm.ListDynamicDropDown[index];
                                                    @Html.HiddenFor(m => m.SuggestionVm.ListDynamicDropDown[index].ControlId)
                                                    @Html.HiddenFor(m => m.SuggestionVm.ListDynamicDropDown[index].FieldName)
                                                    <div class="form-group col-md-6">
                                                        <div class="col-md-4">
                                                            <label>@vmDropDownList.FieldName</label>
                                                        </div>
                                                        <div class="col-md-8">
                                                            @Html.DropDownListFor(m => m.SuggestionVm.ListDynamicDropDown[index].SelectedItemId, vmDropDownList.FieldValue, "--Select--", new { @class = "form-control" })
                                                            @Html.ValidationMessageFor(m => m.SuggestionVm.ListDynamicDropDown[index].SelectedItemId, null, new { @class = "label label-warning" })
                                                            @Html.HiddenFor(m => m.SuggestionVm.ListDynamicDropDown[index].IsRequired)
                                                        </div>
                                                    </div>
                                                }
                                            }
                                            // end DropdownListCode
                                        }
                                    }
                                    @*<div class="form-group col-lg-12 col-md-12">
                                            <div class="col-md-2 col-lg-2">
                                                <label>Agent's comments </label>
                                            </div>
                                            <div class="col-md-10">
                                                @Html.TextAreaFor(m => m.SuggestionVm.Agent_Comments, new { @class = "form-control col-md-12 col-xs-12", rows = 3 })
                                                @Html.ValidationMessageFor(m => m.SuggestionVm.Agent_Comments, "", new { @class = "label label-warning" })


                                            </div>
                                        </div>*@
                                    <div class="form-group col-md-12">
                                        <button type="submit" style="margin: 5px 15px 0 0" class="btn btn-primary pull-right" onclick="OnSumitClick()"><span class="fa fa-save"></span>&nbsp;Submit</button>
                                    </div>
                                    <br clear="all" />

                                </div>
                                <!--End Suggestion tab content-->
                                <!--Inquiry tab content-->
                                <div class="tab-pane" id="InquiryArea">


                                    @if (Model.InquiryVm.DynamicFieldsCount > 0)
                                    {

                                        int index = 0;

                                        for (int i = Model.InquiryVm.MinDynamicFormPriority; i <= Model.InquiryVm.MaxDynamicFormPriority; i++)
                                        {

                                            //List<VmDynamicDropDownList> listVmDropDownList = Model.InquiryVm.ListDynamicDropDown.Where(n => n.Priority == i).ToList();
                                            List<VmDynamicTextbox> listVmTextBox = Model.InquiryVm.ListDynamicTextBox.Where(n => n.Priority == i).ToList();
                                            List<VmDynamicLabel> listVmLabel = Model.InquiryVm.ListDynamicLabel.Where(n => n.Priority == i).ToList();
                                            //List<VmDynamicDropDownListServerSide> listVmDropDownListServerSide = Model.InquiryVm.ListDynamicDropDownServerSide.Where(n => n.Priority == i).ToList();

                                            // DropdownListCode
                                            @*if (listVmDropDownList != null)
                                                {
                                                    foreach (VmDynamicDropDownList vmDropDownList in listVmDropDownList)
                                                    {
                                                        index = Model.InquiryVm.ListDynamicDropDown.FindIndex(n => n == vmDropDownList);
                                                        // adding custom code

                                                        //VmDynamicDropDownList vmDropDownList = Model.InquiryVm.ListDynamicDropDown[index];
                                                        @Html.HiddenFor(m => m.InquiryVm.ListDynamicDropDown[index].ControlId)
                                                        @Html.HiddenFor(m => m.InquiryVm.ListDynamicDropDown[index].FieldName)
                                                        <div class="form-group col-md-6">
                                                            <div class="col-md-4">
                                                                <label>@vmDropDownList.FieldName</label>
                                                            </div>
                                                            <div class="col-md-8">
                                                                @Html.DropDownListFor(m => m.InquiryVm.ListDynamicDropDown[index].SelectedItemId, vmDropDownList.FieldValue, "--Select--", new { @class = "form-control" })
                                                                @Html.ValidationMessageFor(m => m.InquiryVm.ListDynamicDropDown[index].SelectedItemId, null, new { @class = "label label-warning" })
                                                                @Html.HiddenFor(m => m.InquiryVm.ListDynamicDropDown[index].IsRequired)
                                                            </div>
                                                        </div>
                                                    }
                                                }*@
                                            // end DropdownListCode

                                            // DropdownListCode server side
                                            /*if (listVmDropDownListServerSide != null)
                                            {
                                                foreach (VmDynamicDropDownListServerSide vmDropDownListServerSide in listVmDropDownListServerSide)
                                                {
                                                    index = Model.InquiryVm.ListDynamicDropDownServerSide.FindIndex(n => n == vmDropDownListServerSide);
                                                    //string appendedDropDownListId = index+"_"+@Model.InquiryVm.Compaign_Id + "_" + vmDropDownListServerSide.CategoryTypeId;
                                                    string appendedDropDownListId = Config.Separator + index + Config.Separator + Model.InquiryVm.Compaign_Id + Config.Separator + vmDropDownListServerSide.CategoryTypeId + Config.Separator;
                                                    // adding custom code

                                                    @Html.HiddenFor(m => m.InquiryVm.ListDynamicDropDownServerSide[index].ControlId)
                                                    @Html.HiddenFor(m => m.InquiryVm.ListDynamicDropDownServerSide[index].FieldName)
                                                    <div class="form-group col-md-6">
                                                        <div class="col-md-4">
                                                            <label>@vmDropDownListServerSide.FieldName</label>
                                                        </div>
                                                        <div class="col-md-8">
                                                            @Html.DropDownListFor(m => m.InquiryVm.ListDynamicDropDownServerSide[index].SelectedItemId, vmDropDownListServerSide.FieldValue, "--Select--", new { @class = "js-data-example-ajax js-example-events form-control", @Id = "DynamicDropDownListServerSide" + appendedDropDownListId })
                                                            @Html.ValidationMessageFor(m => m.InquiryVm.ListDynamicDropDownServerSide[index].SelectedItemId, null, new { @class = "label label-warning" })
                                                            @Html.HiddenFor(m => m.InquiryVm.ListDynamicDropDownServerSide[index].IsRequired)
                                                        </div>
                                                    </div>
                                                }
                                            }*/

                                            // TextBox
                                            if (listVmTextBox != null)
                                            {
                                                foreach (VmDynamicTextbox vmTextBox in listVmTextBox)
                                                {
                                                    index = Model.InquiryVm.ListDynamicTextBox.FindIndex(n => n == vmTextBox);
                                                    // adding custom code

                                                    //VmDynamicDropDownList vmDropDownList = Model.InquiryVm.ListDynamicDropDown[index];
                                                    @Html.HiddenFor(m => m.InquiryVm.ListDynamicTextBox[index].ControlId)
                                                    @Html.HiddenFor(m => m.InquiryVm.ListDynamicTextBox[index].FieldName)
                                                    <div class="form-group col-md-6">
                                                        <div class="col-md-4">
                                                            <label>@vmTextBox.FieldName</label>
                                                            @*<label>@vmTextBox.FieldName</label>*@
                                                        </div>
                                                        <div class="col-md-8">
                                                            @Html.TextBoxFor(m => m.InquiryVm.ListDynamicTextBox[index].FieldValue, new { @class = "form-control" })
                                                            @Html.ValidationMessageFor(m => m.InquiryVm.ListDynamicTextBox[index].FieldValue, null, new { @class = "label label-warning" })
                                                            @Html.HiddenFor(m => m.InquiryVm.ListDynamicTextBox[index].IsRequired)
                                                        </div>
                                                    </div>
                                                }
                                            }
                                            // end TextBox
                                            if (listVmLabel != null)
                                            {
                                                foreach (VmDynamicLabel vmLabel in listVmLabel)
                                                {
                                                    index = Model.InquiryVm.ListDynamicLabel.FindIndex(n => n == vmLabel);
                                                    // adding custom code

                                                    //VmDynamicDropDownList vmDropDownList = Model.ComplaintVm.ListDynamicDropDown[index];
                                                    @Html.HiddenFor(m => m.InquiryVm.ListDynamicLabel[index].ControlId)
                                                    @Html.HiddenFor(m => m.InquiryVm.ListDynamicLabel[index].FieldName)
                                                    <div class="form-group col-md-6">
                                                        <div class="col-md-4">
                                                            <label>@vmLabel.FieldName</label>
                                                            @*<label>@vmTextBox.FieldName</label>*@
                                                        </div>
                                                        <div class="col-md-8" @*id="@("InquiryDynamicLabel" + Config.Separator + vmLabel.ControlId)"*@>
                                                            @Html.TextBoxFor(m => m.InquiryVm.ListDynamicLabel[index].FieldValue, new { @Id = "InquiryDynamicLabel" + Config.Separator + vmLabel.ControlId, @class = "display-readonlyTextBox", @readonly = true })
                                                            @*@Html.ValidationMessageFor(m => m.ComplaintVm.ListDynamicLabel[index].FieldValue, null, new { @class = "label label-warning" })*@
                                                            @Html.HiddenFor(m => m.InquiryVm.ListDynamicLabel[index].IsRequired)
                                                        </div>
                                                    </div>
                                                }
                                            }
                                        }

                                        <br clear="all" />
                                        <hr>
                                        <br clear="all" />
                                    }
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>
                                                School Category سکول کا زمرہ *
                                            </label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.InquiryVm.SchoolCategory, Model.InquiryVm.SchoolCategorySelectList, new { @Id = "inquirySchoolCategory", @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.InquiryVm.SchoolCategory, "", new { @class = "label label-warning" })

                                            @*@Html.CheckBoxFor(m => m.InquiryVm.IsPrivate, new { @Id = "inquiryIsPrivate" })*@
                                            @*@Html.ValidationMessageFor(m => m.ComplaintVm.IsPrivate, "", new { @class = "label label-warning" })*@
                                            @*@Html.CheckBoxFor(m => m.ComplaintVm.IsPrivate, new { @Id = "IsPrivate", @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.ComplaintVm.IsPrivate, "", new { @class = "label label-warning" })*@


                                        </div>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>
                                                Province صوبہ
                                            </label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.InquiryVm.Province_Id, Model.InquiryVm.ProvinceSelectList, new { @Id = "inquiryUserControlProvince", @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.InquiryVm.Province_Id, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>District ضلع</label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.InquiryVm.District_Id, new List<SelectListItem>(), "--Select--", new { @Id = "inquiryUserControlDistrict", @class = "form-control" })
                                            @Html.ValidationMessageFor(m => m.InquiryVm.District_Id, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>
                                    @if (Model.InquiryVm.DynamicFieldsCount > 0)
                                    {
                                        int index = 0;

                                        for (int i = Model.InquiryVm.MinDynamicFormPriority; i <= Model.InquiryVm.MaxDynamicFormPriority; i++)
                                        {
                                            List<VmDynamicDropDownListServerSide> listVmDropDownListServerSide = Model.InquiryVm.ListDynamicDropDownServerSide.Where(n => n.Priority == i).ToList();

                                            // DropdownListCode server side
                                            if (listVmDropDownListServerSide != null)
                                            {
                                                foreach (VmDynamicDropDownListServerSide vmDropDownListServerSide in listVmDropDownListServerSide)
                                                {
                                                    index = Model.InquiryVm.ListDynamicDropDownServerSide.FindIndex(n => n == vmDropDownListServerSide);
                                                    //string appendedDropDownListId = index+"_"+@Model.ComplaintVm.Compaign_Id + "_" + vmDropDownListServerSide.CategoryTypeId;
                                                    string appendedDropDownListId = Config.Separator + index + Config.Separator + Model.InquiryVm.Compaign_Id + Config.Separator + vmDropDownListServerSide.CategoryTypeId + Config.Separator;
                                                    // adding custom code

                                                    @Html.HiddenFor(m => m.InquiryVm.ListDynamicDropDownServerSide[index].ControlId)
                                                    @Html.HiddenFor(m => m.InquiryVm.ListDynamicDropDownServerSide[index].FieldName)
                                                    <div class="form-group col-md-6">
                                                        <div class="col-md-4">
                                                            <label>@vmDropDownListServerSide.FieldName</label>
                                                        </div>
                                                        <div class="col-md-8">
                                                            @Html.DropDownListFor(m => m.InquiryVm.ListDynamicDropDownServerSide[index].SelectedItemId, vmDropDownListServerSide.FieldValue, "--Select--", new { @class = "js-data-example-ajax js-example-events form-control", @Id = "inquiryDynamicDropDownListServerSide" + appendedDropDownListId })
                                                            @Html.ValidationMessageFor(m => m.InquiryVm.ListDynamicDropDownServerSide[index].SelectedItemId, null, new { @class = "label label-warning" })
                                                            @Html.HiddenFor(m => m.InquiryVm.ListDynamicDropDownServerSide[index].IsRequired)
                                                        </div>
                                                    </div>
                                                }
                                            }

                                        }
                                    }

                                    @if (@Model.InquiryVm.ListOfDepartment != null && @Model.InquiryVm.ListOfDepartment.Count > 0)
                                    {
                                        <div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>Category زمرہ</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.DropDownListFor(m => m.InquiryVm.departmentId, Model.InquiryVm.DepartmentSelectList, "--Select--", new { @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.InquiryVm.departmentId, "", new { @class = "label label-warning" })


                                            </div>
                                        </div>
                                    }

                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>Type قسم</label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.InquiryVm.Complaint_Category, Model.InquiryVm.ComplaintCategoriesSelectList, "--Select--", new { @class = "form-control", @placeholder = "ex 3520174842579" })
                                            @Html.ValidationMessageFor(m => m.InquiryVm.Complaint_Category, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <div class="col-md-4">
                                            <label>
                                                SubType ذیلی قسم
                                            </label>
                                        </div>
                                        <div class="col-md-8">
                                            @Html.DropDownListFor(m => m.InquiryVm.Complaint_SubCategory, new List<SelectListItem>(), "--Select--", new { @class = "form-control", @placeholder = "ex 3520174842579" })
                                            @Html.ValidationMessageFor(m => m.InquiryVm.Complaint_SubCategory, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>



                                    @*<div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>Town/Tehsil*</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.DropDownListFor(m => m.InquiryVm.Tehsil_Id, new List<SelectListItem>(), "--Select--", new { @Id = "inquiryUserControlTownTehsil", @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.InquiryVm.Tehsil_Id, "", new { @class = "label label-warning" })


                                            </div>
                                        </div>
                                        <div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>UC*</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.DropDownListFor(m => m.InquiryVm.UnionCouncil_Id, new List<SelectListItem>(), "--Select--", new { @Id = "inquiryUserControlUc", @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.InquiryVm.UnionCouncil_Id, "", new { @class = "label label-warning" })


                                            </div>
                                        </div>

                                        <div class="form-group col-md-6">
                                            <div class="col-md-4">
                                                <label>Wards*</label>
                                            </div>
                                            <div class="col-md-8">
                                                @Html.DropDownListFor(m => m.InquiryVm.Ward_Id, new List<SelectListItem>(), "--Select--", new { @Id = "inquiryUserControlWards", @class = "form-control" })
                                                @Html.ValidationMessageFor(m => m.InquiryVm.Ward_Id, "", new { @class = "label label-warning" })


                                            </div>
                                        </div>*@



                                    <div class="form-group col-lg-12 col-md-12">
                                        <div class="col-md-2 col-lg-2">
                                            <label>
                                                Details of Complaint شکایت کی تفصیلات
                                            </label>
                                        </div>
                                        <div class="col-md-10">

                                            @Html.TextAreaFor(m => m.InquiryVm.Complaint_Remarks, new { @class = "form-control col-md-12 col-xs-12", rows = 3 })
                                            @Html.ValidationMessageFor(m => m.InquiryVm.Complaint_Remarks, "", new { @class = "label label-warning" })


                                        </div>
                                    </div>
                                    @if (Model.InquiryVm.DynamicFieldsCount > 0)
                                    {

                                        int index = 0;

                                        for (int i = Model.InquiryVm.MinDynamicFormPriority; i <= Model.InquiryVm.MaxDynamicFormPriority; i++)
                                        {
                                            List<VmDynamicDropDownList> listVmDropDownList = Model.InquiryVm.ListDynamicDropDown.Where(n => n.Priority == i).ToList();
                                            // DropdownListCode
                                            if (listVmDropDownList != null)
                                            {
                                                foreach (VmDynamicDropDownList vmDropDownList in listVmDropDownList)
                                                {
                                                    index = Model.InquiryVm.ListDynamicDropDown.FindIndex(n => n == vmDropDownList);
                                                    // adding custom code

                                                    //VmDynamicDropDownList vmDropDownList = Model.InquiryVm.ListDynamicDropDown[index];
                                                    @Html.HiddenFor(m => m.InquiryVm.ListDynamicDropDown[index].ControlId)
                                                    @Html.HiddenFor(m => m.InquiryVm.ListDynamicDropDown[index].FieldName)
                                                    <div class="form-group col-md-6">
                                                        <div class="col-md-4">
                                                            <label>@vmDropDownList.FieldName</label>
                                                        </div>
                                                        <div class="col-md-8">
                                                            @Html.DropDownListFor(m => m.InquiryVm.ListDynamicDropDown[index].SelectedItemId, vmDropDownList.FieldValue, "--Select--", new { @class = "form-control" })
                                                            @Html.ValidationMessageFor(m => m.InquiryVm.ListDynamicDropDown[index].SelectedItemId, null, new { @class = "label label-warning" })
                                                            @Html.HiddenFor(m => m.InquiryVm.ListDynamicDropDown[index].IsRequired)
                                                        </div>
                                                    </div>
                                                }
                                            }
                                            // end DropdownListCode
                                        }
                                    }
                                    @*<div class="form-group col-lg-12 col-md-12">
                                            <div class="col-md-2 col-lg-2">
                                                <label>Agent's comments </label>
                                            </div>
                                            <div class="col-md-10">
                                                @Html.TextAreaFor(m => m.InquiryVm.Agent_Comments, new { @class = "form-control col-md-12 col-xs-12", rows = 3 })
                                                @Html.ValidationMessageFor(m => m.InquiryVm.Agent_Comments, "", new { @class = "label label-warning" })


                                            </div>
                                        </div>*@
                                    <div class="form-group col-md-12">
                                        <button type="submit" style="margin: 5px 15px 0 0" class="btn btn-primary pull-right" onclick="OnSumitClick()"><span class="fa fa-save"></span>&nbsp;Submit</button>
                                    </div>
                                    <br clear="all" />

                                </div>
                                <!--Inquiry tab content-->


                            </div>
                            <!-- /.tab-content -->
                        </div>


                        <!--Tabs End-->

                    </div>
                </section>
            }
        </section>
    </div>
</div>

<script type="text/javascript">
    var dropDownDictHierarchyComplaint = [];
    var dropDownDictHierarchySuggestion = [];
    var dropDownDictHierarchyInquiry = [];


    var dropDownDictComplaint = [];
    var dropDownDictSuggestion = [];
    var dropDownDictInquiry = [];

    var dictDynamicLabel = [];
    var complaintTab = 'complaint';
    var suggestionTab = 'suggestion';
    var inquiryTab = 'inquiry';

    var serverSideDropDownUrl;
    var selectedSchoolData;

    $('#IsCnicPresent').change(function () {
        if ($(this).is(":checked")) {
            $("#CnicTxtBox").prop("disabled", true);
        } else {
            $("#CnicTxtBox").prop("disabled", false);
        }
    });


    $(document).ready(function () {

        $('#IsCnicPresent').trigger("change");


        serverSideDropDownUrl = '@Url.Action("GetDynamicOptionListAgainstSearch", "GeneralApi")?campaignId=1&categoryId=2&searchStr=3';
        //debugger;
        PopulateDropDownDictionaryHierarchy();

        RegisterDropDownListChangeEventsForProvinceDistrict("userControlPersonProvince", "userControlPersonDistrict", $('#ComplaintVm_Compaign_Id').val());

        RegisterDropDownListChangeEventsCustomDictionary(dropDownDictHierarchyComplaint);
        RegisterDropDownListChangeEventsCustomDictionary(dropDownDictHierarchySuggestion);
        RegisterDropDownListChangeEventsCustomDictionary(dropDownDictHierarchyInquiry);
        //RegisterDropDownListChangeEventsForProvinceDistrict("complaintUserControlProvince", "complaintUserControlDistrict", "complaintUserControlTownTehsil", "complaintUserControlUc");
        //RegisterDropDownListChangeEventsForProvinceDistrict("suggestionUserControlProvince", "suggestionUserControlDistrict", "suggestionUserControlTownTehsil", "suggestionUserControlUc");
        //RegisterDropDownListChangeEventsForProvinceDistrict("inquiryUserControlProvince", "inquiryUserControlDistrict", "inquiryUserControlTownTehsil", "inquiryUserControlUc");

        PopulateDropDownDictionary();
        RegisterDropDownListChangeEventsCustomDictionary(dropDownDictComplaint);
        RegisterDropDownListChangeEventsCustomDictionary(dropDownDictSuggestion);
        RegisterDropDownListChangeEventsCustomDictionary(dropDownDictInquiry);

        //RegisterDropDownListChangeEventsComplaintTypes("ComplaintVm_Complaint_Category", "ComplaintVm_Complaint_SubCategory");
        //RegisterDropDownListChangeEventsComplaintTypes("SuggestionVm_Complaint_Category", "SuggestionVm_Complaint_SubCategory");
        //RegisterDropDownListChangeEventsComplaintTypes("InquiryVm_Complaint_Category", "InquiryVm_Complaint_SubCategory");

        setSelectedListOfDropDown("userControlPersonDistrict", "@Model.PersonalInfoVm.IfNotNull(m => m.District_Id)");
        $('form').removeData('validator');
        $('form').removeData('unobtrusiveValidation');
        $.validator.unobtrusive.parse('form');

        HookOnChangeEvents();


        function formatRepo(repo) {
            if (repo.loading) return repo.text;

            var markup = "<div class='select2-result-repository clearfix'>" +
                "<div class='select2-result-repository__avatar'><img src='" + repo.owner.avatar_url + "' /></div>" +
                "<div class='select2-result-repository__meta'>" +
                "<div class='select2-result-repository__title'>" + repo.full_name + "</div>";

            if (repo.description) {
                markup += "<div class='select2-result-repository__description'>" + repo.description + "</div>";
            }

            markup += "<div class='select2-result-repository__statistics'>" +
                "<div class='select2-result-repository__forks'><i class='fa fa-flash'></i> " + repo.forks_count + " Forks</div>" +
                "<div class='select2-result-repository__stargazers'><i class='fa fa-star'></i> " + repo.stargazers_count + " Stars</div>" +
                "<div class='select2-result-repository__watchers'><i class='fa fa-eye'></i> " + repo.watchers_count + " Watchers</div>" +
                "</div>" +
                "</div></div>";

            return markup;
        }

        function formatRepoSelection(repo) {
            return repo.full_name || repo.text;
        }


        //var $eventSelect = $(".js-example-events");

        //$("#complaintUserControlDistrict").change(function () {

        //    ResetSchool();
        //    //var currentTab = GetCurrentTab();
        //    //$('#' + currentTab + 'DynamicLabel___12').val('');
        //    //$('#' + currentTab + 'DynamicLabel___13').val('');
        //    //$('#' + currentTab + 'DynamicLabel___14').val('');
        //    //$('#' + currentTab + 'DynamicLabel___15').val('');
        //    //$('#' + currentTab + 'DynamicLabel___16').val('');
        //    //$('#' + currentTab + 'DynamicLabel___17').val('');
        //    //$('#' + currentTab + 'DynamicLabel___105').val('');
        //    //$(".js-example-events").select2("val", 'All');
        //    //$(".js-example-events").val('');
        //});

        function HookOnChangeEvents() {
            //return;
            $("#complaintUserControlDistrict").change(function () {
                ResetSchool();
            });
            $("#suggestionUserControlDistrict").change(function () {
                ResetSchool();
            });
            $("#inquiryUserControlDistrict").change(function () {
                ResetSchool();
            });
            $("#complaintSchoolCategory").change(function () {
                ResetSchool();
            });
            $("#suggestionSchoolCategory").change(function () {
                ResetSchool();
            });
            $("#inquirySchoolCategory").change(function () {
                ResetSchool();
            });


        }

        function ResetSchool() {
            var currentTab = GetCurrentTab();
            $('#' + currentTab + 'DynamicLabel___12').val('');
            $('#' + currentTab + 'DynamicLabel___13').val('');
            $('#' + currentTab + 'DynamicLabel___14').val('');
            $('#' + currentTab + 'DynamicLabel___15').val('');
            $('#' + currentTab + 'DynamicLabel___16').val('');
            $('#' + currentTab + 'DynamicLabel___17').val('');
            $('#' + currentTab + 'DynamicLabel___105').val('');
            $('#' + currentTab + 'DynamicLabel___106').val('');
            $(".js-example-events").select2("val", 'All');
            $(".js-example-events").val('');
        }


        $(".js-example-events").on("change", function (e) {
            debugger;
            //if (this.value!=)
            if (this.value == "") {
                return;
            }
            $.ajax({
                url: '@Url.Action("GetSchoolAgainstSchoolSearchStr", "GeneralApi")',
                type: 'GET',
                data: { schoolSearchResult: this.value },
                async: false,
                success: function (divdata) {
                    debugger;

                    var currentTab = GetCurrentTab();

                    $('#' + currentTab + 'DynamicLabel___12').val(divdata.tehsil_name);
                    $('#' + currentTab + 'DynamicLabel___13').val(divdata.markaz_name);
                    $('#' + currentTab + 'DynamicLabel___14').val(divdata.school_emis_code);
                    $('#' + currentTab + 'DynamicLabel___15').val(divdata.school_gender);
                    $('#' + currentTab + 'DynamicLabel___16').val(divdata.school_level);
                    //$('#' + currentTab + 'DynamicLabel___105').val(divdata.School_Category == 2 ? 'Private' : 'Public');
                    $('#' + currentTab + 'DynamicLabel___105').val($('#' + GetCurrentTabLowerCase() + 'SchoolCategory option:selected').text());
                    $('#' + currentTab + 'DynamicLabel___106').val(divdata.PMIU_School_Id);
                    var schoolType = '';
                    if (divdata.School_Type == '@((int)Config.SchoolType.Elementary)') {
                        schoolType = '@(Config.SchoolType.Elementary)';
                    } else if (divdata.School_Type == '@((int)Config.SchoolType.Primary)') {
                        schoolType = '@(Config.SchoolType.Primary)';
                    }
                    else if (divdata.School_Type == '@((int)Config.SchoolType.Secondary)') {
                        schoolType = '@(Config.SchoolType.Secondary)';
                    }
                    $('#' + currentTab + 'DynamicLabel___17').val(schoolType);

                    selectedSchoolData = GetSchoolChangeData(GetCurrentTabId(), divdata.School_SubCategory);
                    $("#ComplaintVm_departmentId").val(null);
                    $("#ComplaintVm_departmentId").trigger("change");
                    //debugger;

                    //dropDownDictComplaint[0].value = "ComplaintDepartment?dataStr=" + JSON.stringify(GetSchoolChangeData(GetCurrentTabId(), divdata.School_SubCategory));

                    //$("#complaintSchoolCategory").trigger("change", GetSchoolChangeData(GetCurrentTabId(), divdata.School_SubCategory) /*dropDownDictComplaint[0].value*/);

                    //$.each(divdata, function (index, data) {

                    //    $('#' + currentTab + 'DynamicLabel___12').html(divdata[index]);

                    //});
                },
                error: function(xhr, textStatus, errorThrown){
                    console.log('request failed');
                }
            });
        });

        //window.location = serverSideDropDownUrl;Complaint added successfully , your complaint number
        $('.js-data-example-ajax').each(function (i, obj) {
            debugger;
            var splitStr = obj.id.split("___");
            var campaignId = parseInt(splitStr[2]);
            var categoryId = parseInt(splitStr[3]);


            $(obj).select2({
                ajax: {
                    //url: "https://api.github.com/search/repositories",
                    url: '@Url.Action("GetDynamicSchoolsListAgainstSearch", "GeneralApi")',
                    //?campaignId='+campaignId+'&categoryId='+categoryId+'&searchStr=3'
                    //url: serverSideDropDownUrl,
                    type: 'GET',
                    dataType: 'json',
                    delay: 250,
                    //data: { campaignId: campaignId, categoryId: categoryId, searchStr: params.term },
                    data: function (params) {
                        return {
                            searchStr: params.term, // search term
                            page: params.page || 1,
                            districtId: $('#' + GetCurrentTabLowerCase() + 'UserControlDistrict').val(),
                            schoolCategory: $('#' + GetCurrentTabLowerCase() + 'SchoolCategory').val()
                            //schoolCategory: $('#' + GetCurrentTabLowerCase() +'SchoolCategory').prop('checked') ? 2 : 1
                            //campaignId: campaignId,
                            //categoryId: categoryId
                        };
                    },
                    processResults: function (data, params) {
                        debugger;
                        // parse the results into the format expected by Select2
                        // since we are using custom formatting functions we do not need to
                        // alter the remote JSON data, except to indicate that infinite
                        // scrolling can be used
                        params.page = params.page || 1;

                        //data = [{ id: 0, text: 'enhancement' }, { id: 1, text: 'bug' }, { id: 2, text: 'duplicate' }, { id: 3, text: 'invalid' }, { id: 4, text: 'wontfix' }];

                        return {
                            results: data.ListItems,
                            pagination: {
                                more: (params.page * 10) < data.TotalCount
                            }
                        };
                    },
                    cache: true
                },
                //escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
                minimumInputLength: 1,
                //templateResult: formatRepo, // omitted for brevity, see the source of this page
                //templateSelection: formatRepoSelection // omitted for brevity, see the source of this page
            });
        });
    });


    /*
    $('.form-control').on('input keydown', function (e) {
        debugger;
        e.preventDefault();

        //var i = $(this).attr('data-column');key
        //var v = $(this).val();
        //$('#agentListing').DataTable().columns(i).search(v).draw();
    });
    */

    function OnSumitClick() {
        debugger;
        $('#currentComplaintTypeTab').val($('.nav-tabs .active').text());
        debugger;
        //var isPrivate = $('#IsPrivate').prop('checked');
        if ($('#AddComplaintFormSE').valid()) {
            ShowLoading();
        }

    }

    function PopulateDynamicLabelMappingList() {

        //var tabPrefix = ComplaintDynamicLabel___12

        //dictDynamicLabel.push({
        //        key: "complaintUserControlProvince",
        //        value: "Districts?campaignId=" + $('#ComplaintVm_Compaign_Id').val()
        //    }
        //);

        //dropDownDictHierarchyComplaint.push({
        //    key: "complaintUserControlProvince",
        //    value: "Districts?campaignId=" + $('#ComplaintVm_Compaign_Id').val()
        //});
    }


    function GetCurrentTab() {
        //var tab = $('#currentComplaintTypeTab').val($('.nav-tabs .active').text());
        var tab = $('.nav-tabs .active').text();

        if (tab == 'Complaint شکایت') {
            return 'Complaint';
        }
        else if (tab == 'Suggestion تجاویز') {
            return 'Suggestion';
        }
        else if (tab == 'Inquiry تفتیش') {
            return 'Inquiry';
        }
    }

    function GetCurrentTabId() {
        //var tab = $('#currentComplaintTypeTab').val($('.nav-tabs .active').text());
        var tab = $('.nav-tabs .active').text();

        if (tab == 'Complaint شکایت') {
            return 1;
        }
        else if (tab == 'Suggestion تجاویز') {
            return 2;
        }
        else if (tab == 'Inquiry تفتیش') {
            return 3;
        }
    }

    function GetCurrentTabLowerCase() {
        //var tab = $('#currentComplaintTypeTab').val($('.nav-tabs .active').text());
        var tab = $('.nav-tabs .active').text();

        if (tab == 'Complaint شکایت') {
            return 'complaint';
        }
        else if (tab == 'Suggestion تجاویز') {
            return 'suggestion';
        }
        else if (tab == 'Inquiry تفتیش') {
            return 'inquiry';
        }
    }

    // Populate Hierarchy Dictioary done

    function PopulateDropDownDictionaryHierarchy() {

        // complaint
        dropDownDictHierarchyComplaint.push({
            key: "complaintUserControlProvince",
            value: "Districts?campaignId=" + $('#ComplaintVm_Compaign_Id').val()
        });

        dropDownDictHierarchyComplaint.push({
            key: "complaintUserControlDistrict",
            value: "TownTehsils?campaignId=" + $('#ComplaintVm_Compaign_Id').val()
        });

        dropDownDictHierarchyComplaint.push({
            key: "complaintUserControlTownTehsil",
            value: "UnionCouncils?campaignId=" + $('#ComplaintVm_Compaign_Id').val()
        });

        dropDownDictHierarchyComplaint.push({
            key: "complaintUserControlUc",
            value: "Wards?campaignId=" + $('#ComplaintVm_Compaign_Id').val()
        });

        dropDownDictHierarchyComplaint.push({
            key: "complaintUserControlWards",
            value: null
        });

        //Suggestion list

        dropDownDictHierarchySuggestion.push({
            key: "suggestionUserControlProvince",
            value: "Districts?campaignId=" + $('#ComplaintVm_Compaign_Id').val()
        });

        dropDownDictHierarchySuggestion.push({
            key: "suggestionUserControlDistrict",
            value: "TownTehsils?campaignId=" + $('#ComplaintVm_Compaign_Id').val()
        });

        dropDownDictHierarchySuggestion.push({
            key: "suggestionUserControlTownTehsil",
            value: "UnionCouncils?campaignId=" + $('#ComplaintVm_Compaign_Id').val()
        });

        dropDownDictHierarchySuggestion.push({
            key: "suggestionUserControlUc",
            value: "Wards?campaignId=" + $('#ComplaintVm_Compaign_Id').val()
        });

        dropDownDictHierarchySuggestion.push({
            key: "suggestionUserControlWards",
            value: null
        });


        //Inquiry list

        dropDownDictHierarchyInquiry.push({
            key: "inquiryUserControlProvince",
            value: "Districts?campaignId=" + $('#ComplaintVm_Compaign_Id').val()
        });

        dropDownDictHierarchyInquiry.push({
            key: "inquiryUserControlDistrict",
            value: "TownTehsils?campaignId=" + $('#ComplaintVm_Compaign_Id').val()
        });

        dropDownDictHierarchyInquiry.push({
            key: "inquiryUserControlTownTehsil",
            value: "UnionCouncils?campaignId=" + $('#ComplaintVm_Compaign_Id').val()
        });

        dropDownDictHierarchyInquiry.push({
            key: "inquiryUserControlUc",
            value: "Wards?campaignId=" + $('#ComplaintVm_Compaign_Id').val()
        });

        dropDownDictHierarchyInquiry.push({
            key: "inquiryUserControlWards",
            value: null
        });

    }

    $("#ComplaintVm_departmentId").change(function (e) {
        //debugger;

        if (selectedSchoolData != null && selectedSchoolData.tagData.moduleId == "onSchoolCategoryAndDepartmentChangeLoadCategories" /*&& selectedSchoolData.tagData.schoolSubcategory == 2*/) {
            selectedSchoolData.tagData.departmentId = $(this).val();
            selectedSchoolData.departmentId = $(this).val();
            dropDownDictComplaint[1].value = "ComplaintTypesByDataStr?dataStr=" + JSON.stringify(selectedSchoolData);
        }
        else {
            dropDownDictComplaint[1].value = "ComplaintTypesByDepartmentId?campaignId=" + $('#ComplaintVm_Compaign_Id').val() + "&ComplaintType=" + '@((int)Config.ComplaintType.Complaint)'
        }
    });

    $("#complaintSchoolCategory").on("change", function (e, data) {

        //debugger;
        //if (data != null && data.tagData.moduleId == "onSchoolChangeLoadDepartments" && data.tagData.value==2)
        //{
        //    dropDownDictComplaint[0].value = "ComplaintDepartment?dataStr=" + JSON.stringify(data);
        //}
        //else
        //{
            dropDownDictComplaint[0].value = "ComplaintDepartment?dataStr=" + JSON.stringify(GetSchoolTypeChangeData('complaintSchoolCategory', 1));
        //}
    });

    $("#suggestionSchoolCategory").on("change", function (e) {

        dropDownDictSuggestion[0].value = "ComplaintDepartment?dataStr=" + JSON.stringify(GetSchoolTypeChangeData('suggestionSchoolCategory', 2));
    });

    $("#inquirySchoolCategory").on("change", function (e) {

        dropDownDictInquiry[0].value = "ComplaintDepartment?dataStr=" + JSON.stringify(GetSchoolTypeChangeData('inquirySchoolCategory', 3));
    });

    function GetSchoolTypeChangeData(schoolDivId, complaintType) {

        var data = {
                campaignId: parseInt($('#ComplaintVm_Compaign_Id').val()),
                complaintType: complaintType, //parseInt(GetCurrentTabId()),
                //tagData: {
                //    campaignId: parseInt($('#ComplaintVm_Compaign_Id').val()),
                //    moduleId: 'department_filter',
                //    filterKeyName: 'schoolCategory',
                //    filterKeyValue: parseInt($('#' + schoolDivId + '').val())

                //}
                tagData: {
                    campaignId: parseInt($('#ComplaintVm_Compaign_Id').val()),
                    complaintType: complaintType,
                    moduleId: 'onSchoolCategoryChangeLoadDepartments',
                    schoolCategory: parseInt($('#' + schoolDivId + '').val())
                    //key: 'schoolCategory',
                    //value: parseInt($('#' + schoolDivId + '').val())
                }
        }
        return data;
    }

    function GetSchoolChangeData(complaintType, schoolSubCategory) {
        var data = {
            complaintType: complaintType, //parseInt(GetCurrentTabId()),
            campaignId: parseInt($('#ComplaintVm_Compaign_Id').val()),
            tagData: {
                campaignId: parseInt($('#ComplaintVm_Compaign_Id').val()),
                complaintType: complaintType,
                moduleId: 'onSchoolCategoryAndDepartmentChangeLoadCategories',
                schoolSubcategory: schoolSubCategory
                //key: "schoolSubcategory",
                //value: schoolSubCategory
            }
        }

        return data;
    }

    function PopulateDropDownDictionary() {

        debugger;

        if ($('#ComplaintVm_hasDepartment').val() == 'True') {

            dropDownDictComplaint.push({
                key: "complaintSchoolCategory",
                value: "ComplaintDepartment?dataStr=" + JSON.stringify(GetSchoolTypeChangeData('complaintSchoolCategory',1))
            });

            dropDownDictComplaint.push({
                key: "ComplaintVm_departmentId",
                value: "ComplaintTypesByDepartmentId?campaignId=" + $('#ComplaintVm_Compaign_Id').val() + "&ComplaintType=" + '@((int)Config.ComplaintType.Complaint)'
            });
        }

        if ($('#SuggestionVm_hasDepartment').val() == 'True') {

            dropDownDictSuggestion.push({
                key: "suggestionSchoolCategory",
                value: "ComplaintDepartment?dataStr=" + JSON.stringify(GetSchoolTypeChangeData('suggestionSchoolCategory',2))
            });

            dropDownDictSuggestion.push({
                key: "SuggestionVm_departmentId",
                value: "ComplaintTypesByDepartmentId?campaignId=" + $('#ComplaintVm_Compaign_Id').val() + "&ComplaintType=" + '@((int)Config.ComplaintType.Suggestion)'
            });
        }

        if ($('#InquiryVm_hasDepartment').val() == 'True') {

            dropDownDictInquiry.push({
                key: "inquirySchoolCategory",
                value: "ComplaintDepartment?dataStr=" + JSON.stringify(GetSchoolTypeChangeData('inquirySchoolCategory',3))
            });

            dropDownDictInquiry.push({
                key: "InquiryVm_departmentId",
                value: "ComplaintTypesByDepartmentId?campaignId=" + $('#ComplaintVm_Compaign_Id').val() + "&ComplaintType=" + '@((int)Config.ComplaintType.Inquiry)'
            });
        }

        dropDownDictComplaint.push({
            key: "ComplaintVm_Complaint_Category",
            value: "ComplaintSubType?campaignId=" + $('#ComplaintVm_Compaign_Id').val() + "&ComplaintType=" + '@((int)Config.ComplaintType.Complaint)'
        });

        dropDownDictComplaint.push({
            key: "ComplaintVm_Complaint_SubCategory",
            value: null
        });

        dropDownDictSuggestion.push({
            key: "SuggestionVm_Complaint_Category",
            value: "ComplaintSubType?campaignId=" + $('#ComplaintVm_Compaign_Id').val() + "&ComplaintType=" + '@((int)Config.ComplaintType.Suggestion)'
        });

        dropDownDictSuggestion.push({
            key: "SuggestionVm_Complaint_SubCategory",
            value: null
        });

        dropDownDictInquiry.push({
            key: "InquiryVm_Complaint_Category",
            value: "ComplaintSubType?campaignId=" + $('#ComplaintVm_Compaign_Id').val() + "&ComplaintType=" + '@((int)Config.ComplaintType.Inquiry)'
        });

        dropDownDictInquiry.push({
            key: "InquiryVm_Complaint_SubCategory",
            value: null
        });

    }


     window.onload = function () {

        if ('@((int)AuthenticationHandler.GetCookie().Role)' == 9) {
            $('.fieldsEnable:input').each(function (i,v) {

                if ($(this).is("input") || $(this).is("textarea")) {
                    $(this).attr('readonly','enabled');
                }
                else if ($(this).is("select")) {
                    $(this).attr('disabled', 'enabled');
                }
            })
        }
    }

</script>